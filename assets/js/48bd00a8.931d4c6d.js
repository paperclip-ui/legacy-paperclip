"use strict";(self.webpackChunk_paperclip_ui_website=self.webpackChunk_paperclip_ui_website||[]).push([[8510],{3905:function(e,t,n){n.d(t,{Zo:function(){return p},kt:function(){return f}});var r=n(67294);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var l=r.createContext({}),c=function(e){var t=r.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):s(s({},t),e)),n},p=function(e){var t=c(e.components);return r.createElement(l.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},h=r.forwardRef((function(e,t){var n=e.components,o=e.mdxType,a=e.originalType,l=e.parentName,p=i(e,["components","mdxType","originalType","parentName"]),h=c(n),f=o,d=h["".concat(l,".").concat(f)]||h[f]||u[f]||a;return n?r.createElement(d,s(s({ref:t},p),{},{components:n})):r.createElement(d,s({ref:t},p))}));function f(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var a=n.length,s=new Array(a);s[0]=h;var i={};for(var l in t)hasOwnProperty.call(t,l)&&(i[l]=t[l]);i.originalType=e,i.mdxType="string"==typeof e?e:o,s[1]=i;for(var c=2;c<a;c++)s[c]=n[c];return r.createElement.apply(null,s)}return r.createElement.apply(null,n)}h.displayName="MDXCreateElement"},96740:function(e,t,n){n.r(t),n.d(t,{frontMatter:function(){return i},contentTitle:function(){return l},metadata:function(){return c},toc:function(){return p},default:function(){return h}});var r=n(87462),o=n(63366),a=(n(67294),n(3905)),s=["components"],i={id:"visual-regression-tooling",title:"Setting Up Visual Regression Tests",sidebar_label:"Visual regression tools"},l=void 0,c={unversionedId:"visual-regression-tooling",id:"visual-regression-tooling",title:"Setting Up Visual Regression Tests",description:"Paperclip comes with a number of tools to help you keep track of visual changes. The code coverage tool helps you figure out how much code is covered for visual changes, and the",source:"@site/docs/visual-regression-tooling.md",sourceDirName:".",slug:"/visual-regression-tooling",permalink:"/docs/visual-regression-tooling",editUrl:"https://github.com/paperclipui/paperclip/edit/master/packages/paperclip-website/docs/visual-regression-tooling.md",tags:[],version:"current",frontMatter:{id:"visual-regression-tooling",title:"Setting Up Visual Regression Tests",sidebar_label:"Visual regression tools"},sidebar:"docs",previous:{title:"Realtime preview",permalink:"/docs/visual-tooling"},next:{title:"VS Code extension",permalink:"/docs/guide-vscode"}},p=[{value:"HTML and CSS coverage",id:"html-and-css-coverage",children:[],level:3},{value:"Snapshot testing",id:"snapshot-testing",children:[],level:3}],u={toc:p};function h(e){var t=e.components,i=(0,o.Z)(e,s);return(0,a.kt)("wrapper",(0,r.Z)({},u,i,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("p",null,"Paperclip comes with a number of tools to help you keep track of visual changes. The ",(0,a.kt)("a",{parentName:"p",href:"#html-and-css-coverage"},"code coverage")," tool helps you figure out how much code is covered for visual changes, and the\n",(0,a.kt)("a",{parentName:"p",href:"#snapshot-tests"},"snapshot")," tool helps you analyze changes across your app. "),(0,a.kt)("h3",{id:"html-and-css-coverage"},"HTML and CSS coverage"),(0,a.kt)("p",null,"The code coverage tool helps you analyze how much HTML and CSS is visible for snapshot testing. All you need to do is run the following command\nin your project:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"yarn paperclip coverage --html --open\n")),(0,a.kt)("p",null,"This will generate an HTML report and open it up in your browser. The report will look something like this:"),(0,a.kt)("p",null,(0,a.kt)("img",{alt:"alt report summary",src:n(11238).Z})),(0,a.kt)("p",null,"You can navigate this report to find code that's dead or isn't covered for visual changes. Here's what a file looks like:"),(0,a.kt)("p",null,(0,a.kt)("img",{alt:"alt report summary",src:n(2045).Z})),(0,a.kt)("p",null,"The green section indicates code that's covered for snapshot testing, the red section indicates code that's either dead or needs to be set up for snapshot testing."),(0,a.kt)("p",null,"To set up UIs for snapshot tests, all you need to do is apply the CSS to any visible element in a ",(0,a.kt)("inlineCode",{parentName:"p"},"*.pc")," file. In the case of our button above, we can just create a new ",(0,a.kt)("a",{parentName:"p",href:"guide-previews"},"preview")," directly in the button file."),(0,a.kt)("p",null,(0,a.kt)("img",{alt:"alt button preview",src:n(73373).Z})),(0,a.kt)("p",null,"The preview code for this is simply:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-html"},'\x3c!--\n  @frame { width: 330, height: 169, x: 0, y: 0 }\n--\x3e\n<div class="text-default">  \n  <style>\n    display: flex;\n    flex-direction: column;\n    align-items: flex-start;\n    grid-row-gap: 8px;\n  </style>\n\n  \x3c!-- previews for visual regression testing --\x3e\n  <Anchor>Primary</Anchor>\n  <Anchor hover>Primary:hover</Anchor>\n  <Anchor secondary>Secondary</Anchor>\n  <Anchor secondary hover>Secondary:hover</Anchor>\n</div>\n')),(0,a.kt)("p",null,"This satisfies our coverage report. ",(0,a.kt)("i",null,"Now")," when we run it, this is what's shown:"),(0,a.kt)("p",null,(0,a.kt)("img",{alt:"alt better summary",src:n(77873).Z})),(0,a.kt)("p",null,"Now this file is ready for snapshot tests."),(0,a.kt)("h3",{id:"snapshot-testing"},"Snapshot testing"),(0,a.kt)("p",null,"Snapshot testing allows you to keep track of visual changes across your ",(0,a.kt)("inlineCode",{parentName:"p"},"*.pc")," files. This is especially useful in tracking changes that may affect many different files."),(0,a.kt)("p",null,"To use snapshot testing, you'll first need to set up a baseline snapshot, typically on your main or master branch, or whatever branch you currently have in production. Here's how you take a snpshot:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"git checkout main && && git pull && yarn paperclip snapshot\n")),(0,a.kt)("p",null,"This will store PC file screenshots that we can use as a baseline to check for visual changes. After that, you can run this command on any branch to detect visual changes:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-sh"},"yarn paperclip diff [baseline-branch] --html --open\n")),(0,a.kt)("p",null,"If our baseline branch is ",(0,a.kt)("inlineCode",{parentName:"p"},"main"),", the command would be:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-sh"},"yarn paperclip diff main --html --open\n")),(0,a.kt)("p",null,"Here's an example of some changes made to the button file:"),(0,a.kt)("p",null,(0,a.kt)("img",{alt:"alt button tweaks",src:n(11605).Z})),(0,a.kt)("p",null,"This is what the diff report looks like for the button file:"),(0,a.kt)("p",null,(0,a.kt)("img",{alt:"alt button diff",src:n(49003).Z})),(0,a.kt)("p",null,"You'll notice in the left sidebar that all UIs that are affected by this change are towards the top, and outlined in yellow. Here's another UI that was captured by this change:"),(0,a.kt)("p",null,(0,a.kt)("img",{alt:"alt other diff",src:n(54044).Z})))}h.isMDXComponent=!0},77873:function(e,t,n){t.Z=n.p+"assets/images/better-coverage-bc5ceeb802cb640302174c3c0a2f760b.png"},49003:function(e,t,n){t.Z=n.p+"assets/images/button-diff-c074a3fc93e3938103e241481a4fc62d.png"},73373:function(e,t,n){t.Z=n.p+"assets/images/button-preview-49695202d852eaa8bb5f121307942f25.png"},2045:function(e,t,n){t.Z=n.p+"assets/images/button-report-d5e3ab004e32cfe5afa1d1347e3c4e0f.png"},11605:function(e,t,n){t.Z=n.p+"assets/images/button-tweaks-5adba18c267d595967e943fc0db70120.png"},11238:function(e,t,n){t.Z=n.p+"assets/images/html-report-42586cbd4c7568f80a3ea66fac6bfac4.png"},54044:function(e,t,n){t.Z=n.p+"assets/images/other-diff-28991d8874c3d3fe44e86c1fafc582eb.png"}}]);